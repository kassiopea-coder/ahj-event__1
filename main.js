!function(){"use strict";class e{constructor(){this.gameBoard=null}createGameBoard(e){const t=document.createElement("div");t.classList.add("hole-container");for(let s=0;s<e**2;s+=1){const e=document.createElement("div");e.classList.add("hole"),t.appendChild(e)}return this.gameBoard=t,this.gameBoard}}const t=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.boardSize=t,this.board=new e,this.game=!1,this.dead=document.querySelector(".dead"),this.lost=document.querySelector(".lost"),this.count=0}drawGameBoard(){document.body.appendChild(this.board.createGameBoard(this.boardSize)),document.querySelectorAll(".hole").forEach((e=>e.addEventListener("click",this.onClick.bind(this)))),this.holes=[...document.querySelectorAll(".hole")]}activateHole(e){this.holes[e].classList.add("hole_has-goblin")}deactivateHole(e){this.holes[e].classList.remove("hole_has-goblin")}getRandomIndex(){return Math.floor(Math.random()*this.boardSize**2)}getPosition(){let e;do{e=this.getRandomIndex()}while(this.activeHole===e);this.activeHole=e,this.activateHole(this.activeHole)}onClick(e){this.game&&(e.target.classList.contains("hole_has-goblin")&&(this.dead.textContent=Number(this.dead.textContent)+1),clearTimeout(this.timeout),this.deactivateHole(this.activeHole),this.next())}showMessage(){const e=document.querySelector(".message-box__text");e.textContent=`You've scored ${this.dead.textContent} points.`,e.closest(".message-box").classList.remove("message-box_hidden")}removeMessage(){this.messageClose.closest(".message-box").classList.add("message-box_hidden")}start(){this.messageClose=document.querySelector(".message-box_close"),this.game=!0,this.next()}next(){if(this.count+=1,this.lost.textContent=this.count-Number(this.dead.textContent)-1,5===Number(this.lost.textContent))return this.game=!1,this.showMessage(),this.stop(),void this.messageClose.addEventListener("click",this.removeMessage.bind(this));this.getPosition(),this.timeout=setTimeout((()=>{this.deactivateHole(this.activeHole),this.next()}),1e3)}stop(){clearTimeout(this.timeout),this.activeHole&&this.deactivateHole(this.activeHole),this.resetScore()}resetScore(){this.dead.textContent="0",this.lost.textContent="0",this.count=0}}(4);t.drawGameBoard(),document.querySelector(".game__btn").addEventListener("click",(()=>{t.stop(),t.start()}))}();